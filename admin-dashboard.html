<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Restrict access to Admins only
    document.addEventListener('DOMContentLoaded', () => {
      const role = localStorage.getItem('userRole');
      if (role !== 'Admin') {
        window.location.href = 'index.html';
      }

      // Initialize theme based on localStorage
      const savedTheme = localStorage.getItem('theme') || 'dark';
      document.documentElement.setAttribute('data-theme', savedTheme);
    });

    // Example data for users and bookings
    const users = [
      { name: "John Doe", email: "john@example.com", role: "Resident" },
      { name: "Jane Smith", email: "jane@example.com", role: "Facility Staff" },
    ];

    const bookings = [
      { facility: "Soccer Field", date: "2023-09-15", time: "10:00 AM", resident: "John Doe" },
    ];

    // Populate user table
    const userTable = document.getElementById("user-table");
    users.forEach(user => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td class="border border-gray-300 px-4 py-2">${user.name}</td>
        <td class="border border-gray-300 px-4 py-2">${user.email}</td>
        <td class="border border-gray-300 px-4 py-2">${user.role}</td>
        <td class="border border-gray-300 px-4 py-2">
          <button class="bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600" onclick="editUser('${user.email}')">Edit</button>
          <button class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600" onclick="deleteUser('${user.email}')">Delete</button>
        </td>
      `;
      userTable.appendChild(row);
    });

    // Populate booking table
    const bookingTable = document.getElementById("booking-table");
    bookings.forEach(booking => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td class="border border-gray-300 px-4 py-2">${booking.facility}</td>
        <td class="border border-gray-300 px-4 py-2">${booking.date}</td>
        <td class="border border-gray-300 px-4 py-2">${booking.time}</td>
        <td class="border border-gray-300 px-4 py-2">${booking.resident}</td>
        <td class="border border-gray-300 px-4 py-2">
          <button class="bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600" onclick="approveBooking()">Approve</button>
          <button class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600" onclick="blockBooking()">Block</button>
        </td>
      `;
      bookingTable.appendChild(row);
    });

    // Placeholder functions for actions
    function signOut() {
      localStorage.removeItem('userToken');
      localStorage.removeItem('userRole');
      window.location.href = 'roles.html'; // Redirects to roles.html
    }

    function openAddUserModal() {
      const name = prompt('Enter user name:');
      const email = prompt('Enter user email:');
      const role = prompt('Enter user role (Resident, Facility Staff, Admin):');

      if (name && email && role) {
        const newUser = { name, email, role };
        const userTable = document.getElementById('user-table');
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="border border-gray-300 px-4 py-2">${newUser.name}</td>
          <td class="border border-gray-300 px-4 py-2">${newUser.email}</td>
          <td class="border border-gray-300 px-4 py-2">${newUser.role}</td>
          <td class="border border-gray-300 px-4 py-2">
            <button class="bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600" onclick="editUser('${newUser.email}')">Edit</button>
            <button class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600" onclick="deleteUser('${newUser.email}')">Delete</button>
          </td>
        `;
        userTable.appendChild(row);

        // Display JSON details
        const jsonDisplay = document.getElementById('json-display');
        jsonDisplay.textContent = JSON.stringify(newUser, null, 2);
      } else {
        alert('All fields are required.');
      }
    }

    function editUser(email) {
      alert(`Edit user with email: ${email}`);
    }

    function deleteUser(email) {
      alert(`Delete user with email: ${email}`);
    }

    function approveBooking() {
      alert("Booking approved");
    }

    function blockBooking() {
      alert("Booking blocked");
    }

    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
    }
  </script>
  <style>
    body[data-theme="dark"] {
      background: linear-gradient(135deg, #0f172a, #1e293b); /* Dark mode gradient */
    }
    body[data-theme="light"] {
      background: linear-gradient(135deg, #f3f4f6, #e5e7eb); /* Light mode gradient */
    }
    .dark-mode {
      background-color: rgba(255, 255, 255, 0.2);
      color: #f3f4f6;
    }
    .light-mode {
      background-color: rgba(0, 0, 0, 0.1);
      color: #1f2937;
    }
    body {
      background: linear-gradient(135deg, #0f172a, #1e293b); /* Ambient dark gradient */
    }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-900 to-gray-800 min-h-screen">
  <button onclick="toggleTheme()" class="absolute top-4 right-4 bg-gray-200/20 text-gray-100 py-2 px-4 rounded-lg hover:bg-gray-300/20 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 font-medium">
    Toggle Dark/Light Mode
  </button>
  <nav class="bg-white/20 backdrop-blur-lg shadow-lg">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <div class="flex items-center">
          <h1 class="text-xl font-bold text-gray-100">Admin Dashboard</h1>
        </div>
        <div class="flex items-center">
          <button onclick="signOut()" class="bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600">
            Sign Out
          </button>
        </div>
      </div>
    </div>
  </nav>

  <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
    <!-- User Management Section -->
    <section class="bg-white/20 backdrop-blur-lg p-6 rounded-lg shadow-lg mb-6">
      <h2 class="text-2xl font-bold mb-4 text-gray-100">User Management</h2>
      <button onclick="openAddUserModal()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 mb-4">
        Add User
      </button>
      <table class="w-full border-collapse border border-gray-300">
        <thead>
          <tr class="bg-gray-100">
            <th class="border border-gray-300 px-4 py-2">Name</th>
            <th class="border border-gray-300 px-4 py-2">Email</th>
            <th class="border border-gray-300 px-4 py-2">Role</th>
            <th class="border border-gray-300 px-4 py-2">Actions</th>
          </tr>
        </thead>
        <tbody id="user-table">
          <!-- User rows will be dynamically generated here -->
        </tbody>
      </table>
    </section>

    <!-- Booking Management Section -->
    <section class="bg-white/20 backdrop-blur-lg p-6 rounded-lg shadow-lg">
      <h2 class="text-2xl font-bold mb-4 text-gray-100">Booking Management</h2>
      <table class="w-full border-collapse border border-gray-300">
        <thead>
          <tr class="bg-gray-100">
            <th class="border border-gray-300 px-4 py-2">Facility</th>
            <th class="border border-gray-300 px-4 py-2">Date</th>
            <th class="border border-gray-300 px-4 py-2">Time</th>
            <th class="border border-gray-300 px-4 py-2">Resident</th>
            <th class="border border-gray-300 px-4 py-2">Actions</th>
          </tr>
        </thead>
        <tbody id="booking-table">
          <!-- Booking rows will be dynamically generated here -->
        </tbody>
      </table>
    </section>

    <!-- JSON Display Section -->
    <section class="bg-white/20 backdrop-blur-lg p-6 rounded-lg shadow-lg mt-6">
      <h2 class="text-2xl font-bold mb-4 text-gray-100">User Addition Details (JSON)</h2>
      <pre id="json-display" class="bg-gray-100 p-4 rounded-lg text-sm text-gray-800"></pre>
    </section>
  </main>
</body>
</html>
